<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ذاكرة الملحمة | رحلة التأسيس</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ===== متغيرات الألوان للهوية الجديدة ===== */
        :root {
            --primary-dark: #6B4E45;
            --primary-light: #DEC9B2;
            --secondary-light: #F4EADA;
            --accent-beige: #E8DFD6;
            --accent-gold: #C6A467;
            --accent-brown: #231F20;
            --light-beige: #F8F4EF;
            --white: #FFFFFF;
            --black: #231F20;
            --gray: #666666;
            --light-gray: #EEEEEE;
            
            --shadow-light: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-medium: 0 8px 24px rgba(0, 0, 0, 0.12);
            --shadow-heavy: 0 12px 36px rgba(0, 0, 0, 0.15);
            
            --border-radius: 12px;
            --border-radius-lg: 20px;
        }

        /* ===== إعادة الضبط الأساسية ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'El Messiri', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--secondary-light);
            color: var(--black);
            line-height: 1.6;
            direction: rtl;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ===== أنماط مشتركة ===== */
        .section-title {
            text-align: center;
            font-size: 2.5rem;
            color: var(--primary-dark);
            margin-bottom: 1rem;
            position: relative;
        }

        .section-title::after {
            content: '';
            display: block;
            width: 100px;
            height: 4px;
            background: linear-gradient(to right, var(--primary-light), var(--primary-dark));
            margin: 15px auto 30px;
            border-radius: 2px;
        }

        .section-subtitle {
            text-align: center;
            color: var(--gray);
            font-size: 1.2rem;
            margin-bottom: 3rem;
        }

        .btn-primary {
            background-color: var(--primary-light);
            color: var(--primary-dark);
            padding: 14px 32px;
            border-radius: 50px;
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }

        .btn-primary:hover {
            background-color: var(--white);
            color: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .btn-secondary {
            background-color: transparent;
            color: var(--primary-dark);
            padding: 14px 32px;
            border-radius: 50px;
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            border: 2px solid var(--primary-dark);
        }

        .btn-secondary:hover {
            background-color: var(--primary-dark);
            color: var(--primary-light);
            transform: translateY(-3px);
        }

        .btn-small {
            background-color: var(--primary-light);
            color: var(--primary-dark);
            padding: 8px 16px;
            border-radius: 50px;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-small:hover {
            background-color: var(--primary-dark);
            color: var(--primary-light);
        }

        /* ===== شريط التنقل ===== */
        .navbar {
            background-color: var(--primary-dark);
            padding: 1rem 0;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-img {
            height: 50px;
            width: auto;
        }

        .logo-text {
            color: var(--white);
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .nav-link {
            color: var(--white);
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: 500;
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-link:hover, .nav-link.active {
            background-color: rgba(255, 255, 255, 0.15);
            color: var(--primary-light);
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--white);
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* ===== رأس الصفحة ===== */
        .exhibit-header {
            background: linear-gradient(rgba(107, 78, 69, 0.9), rgba(107, 78, 69, 0.95)),
                        url('https://images.unsplash.com/photo-1586771107445-d3ca888129fe?ixlib=rb-4.0.3&auto=format&fit=crop&w=2071&q=80');
            background-size: cover;
            background-position: center;
            padding: 150px 0 80px;
            margin-top: 80px;
            color: var(--white);
            text-align: center;
        }

        .header-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .exhibit-title {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
        }

        .exhibit-subtitle {
            font-size: 1.4rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .exhibit-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin-top: 2rem;
        }

        .exhibit-meta span {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
        }

        /* ===== الخط الزمني ===== */
        .timeline-section {
            padding: 5rem 0;
            background-color: var(--white);
        }

        .timeline-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .timeline-navigation {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .timeline-nav-btn {
            padding: 12px 24px;
            background-color: var(--secondary-light);
            border: 2px solid var(--primary-light);
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-dark);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .timeline-nav-btn:hover,
        .timeline-nav-btn.active {
            background-color: var(--primary-dark);
            color: var(--primary-light);
            border-color: var(--primary-dark);
        }

        .timeline-content {
            background-color: var(--secondary-light);
            border-radius: var(--border-radius-lg);
            padding: 3rem;
            box-shadow: var(--shadow-light);
            margin-bottom: 2rem;
            border: 1px solid var(--primary-light);
        }

        .timeline-event {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .event-content h3 {
            font-size: 2rem;
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
        }

        .event-date {
            color: var(--primary-dark);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 2rem;
            padding: 8px 16px;
            background-color: rgba(222, 201, 178, 0.3);
            border-radius: var(--border-radius);
            display: inline-block;
        }

        .event-media {
            margin: 2rem 0;
            text-align: center;
        }

        .event-media img {
            max-width: 100%;
            height: auto;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-medium);
            border: 1px solid var(--primary-light);
        }

        .media-caption {
            color: var(--gray);
            font-size: 0.9rem;
            margin-top: 0.5rem;
            font-style: italic;
        }

        .event-description p {
            font-size: 1.1rem;
            color: var(--black);
            margin-bottom: 1.5rem;
            line-height: 1.8;
        }

        .event-highlights {
            background-color: rgba(255, 255, 255, 0.5);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin: 2rem 0;
            border-right: 4px solid var(--primary-dark);
        }

        .event-highlights h4 {
            color: var(--primary-dark);
            margin-bottom: 1rem;
        }

        .event-highlights ul {
            list-style-position: inside;
            color: var(--gray);
        }

        .event-highlights li {
            margin-bottom: 0.5rem;
        }

        /* ===== الاختبار التفاعلي ===== */
        .interactive-quiz {
            background-color: var(--white);
            padding: 2rem;
            border-radius: var(--border-radius);
            margin-top: 2rem;
            border: 1px solid var(--primary-light);
        }

        .interactive-quiz h4 {
            color: var(--primary-dark);
            margin-bottom: 1.5rem;
        }

        .quiz-question {
            margin-bottom: 1.5rem;
        }

        .quiz-question p {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: 1rem;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .quiz-option {
            padding: 12px 20px;
            background-color: var(--secondary-light);
            border: 2px solid var(--primary-light);
            border-radius: var(--border-radius);
            color: var(--primary-dark);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 1rem;
        }

        .quiz-option:hover {
            background-color: var(--primary-light);
            transform: translateY(-2px);
        }

        .quiz-option.correct {
            background-color: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }

        .quiz-option.incorrect {
            background-color: #F44336;
            color: white;
            border-color: #F44336;
        }

        .quiz-feedback {
            padding: 1rem;
            border-radius: var(--border-radius);
            font-weight: 600;
            display: none;
        }

        .quiz-feedback.correct {
            background-color: rgba(76, 175, 80, 0.1);
            color: #2E7D32;
            border: 1px solid #4CAF50;
            display: block;
        }

        .quiz-feedback.incorrect {
            background-color: rgba(244, 67, 54, 0.1);
            color: #C62828;
            border: 1px solid #F44336;
            display: block;
        }

        /* ===== شريط التقدم ===== */
        .timeline-progress {
            margin-top: 3rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: var(--light-gray);
            border-radius: 4px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-light), var(--primary-dark));
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
        }

        .step {
            position: relative;
            text-align: center;
            color: var(--gray);
            font-size: 0.9rem;
            padding-top: 25px;
            flex: 1;
        }

        .step::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background-color: var(--light-gray);
            border: 3px solid var(--white);
            z-index: 2;
            transition: all 0.3s ease;
        }

        .step.active {
            color: var(--primary-dark);
            font-weight: 600;
        }

        .step.active::before {
            background-color: var(--primary-dark);
            box-shadow: 0 0 0 4px rgba(107, 78, 69, 0.2);
        }

        /* ===== الخرائط التفاعلية ===== */
        .maps-section {
            padding: 5rem 0;
            background: linear-gradient(135deg, var(--secondary-light) 0%, var(--white) 100%);
        }

        .map-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 3rem;
            align-items: start;
        }

        @media (max-width: 1024px) {
            .map-container {
                grid-template-columns: 1fr;
            }
        }

        .map-viewer {
            position: relative;
            background-color: var(--white);
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-medium);
            border: 1px solid var(--primary-light);
        }

        .map-image {
            width: 100%;
            height: auto;
            border-radius: var(--border-radius);
            display: block;
        }

        .map-overlay {
            position: absolute;
            top: 2rem;
            left: 2rem;
            right: 2rem;
            bottom: 2rem;
        }

        .map-point {
            position: absolute;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .map-point:hover .point-marker {
            transform: scale(1.2);
            box-shadow: 0 0 0 8px rgba(222, 201, 178, 0.3);
        }

        .map-point:hover .point-info {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .point-marker {
            width: 24px;
            height: 24px;
            background-color: var(--primary-dark);
            border-radius: 50%;
            border: 3px solid var(--white);
            box-shadow: 0 0 0 4px var(--primary-dark);
            transition: all 0.3s ease;
        }

        .point-info {
            position: absolute;
            top: 40px;
            right: 0;
            background-color: var(--white);
            padding: 1rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-heavy);
            min-width: 200px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .point-info h4 {
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
        }

        .point-info p {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .map-details {
            background-color: var(--white);
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-medium);
            border: 1px solid var(--primary-light);
        }

        .map-details h3 {
            color: var(--primary-dark);
            margin-bottom: 1rem;
        }

        .location-facts {
            background-color: var(--secondary-light);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin: 1.5rem 0;
        }

        .location-facts h4 {
            color: var(--primary-dark);
            margin-bottom: 1rem;
        }

        .location-images {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .location-images img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: var(--border-radius);
            border: 1px solid var(--primary-light);
        }

        /* ===== شخصيات صنعت التاريخ ===== */
        .characters-section {
            padding: 5rem 0;
            background-color: var(--white);
        }

        .characters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 3rem;
            margin-top: 3rem;
        }

        .character-card {
            background-color: var(--secondary-light);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--primary-light);
            transition: all 0.3s ease;
        }

        .character-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-medium);
        }

        .character-image {
            position: relative;
            height: 250px;
            overflow: hidden;
        }

        .character-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .character-card:hover .character-image img {
            transform: scale(1.05);
        }

        .character-badge {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background-color: var(--primary-dark);
            color: var(--primary-light);
            padding: 6px 12px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .character-info {
            padding: 2rem;
        }

        .character-info h3 {
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
            font-size: 1.5rem;
        }

        .character-dates {
            color: var(--primary-dark);
            font-weight: 600;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .character-bio {
            color: var(--gray);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .character-achievements {
            background-color: rgba(255, 255, 255, 0.5);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin: 1.5rem 0;
            border-right: 3px solid var(--primary-dark);
        }

        .character-achievements h4 {
            color: var(--primary-dark);
            margin-bottom: 0.5rem;
        }

        .character-achievements ul {
            list-style-position: inside;
            color: var(--gray);
        }

        .character-achievements li {
            margin-bottom: 0.3rem;
            font-size: 0.9rem;
        }

        /* ===== اختبار نهاية الرحلة ===== */
        .quiz-section {
            padding: 5rem 0;
            background: linear-gradient(135deg, var(--secondary-light) 0%, var(--white) 100%);
        }

        .quiz-card {
            background-color: var(--white);
            border-radius: var(--border-radius-lg);
            padding: 4rem;
            box-shadow: var(--shadow-heavy);
            border: 1px solid var(--primary-light);
            max-width: 800px;
            margin: 0 auto;
        }

        #memoryQuiz {
            margin-top: 2rem;
        }

        .quiz-results {
            text-align: center;
            padding: 2rem 0;
        }

        .score-display {
            margin: 2rem 0;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-light), var(--primary-dark));
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            color: var(--white);
        }

        .score-circle span {
            font-size: 3rem;
            font-weight: 700;
            line-height: 1;
        }

        .score-circle small {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        #resultMessage {
            font-size: 1.2rem;
            color: var(--primary-dark);
            margin: 1.5rem 0;
        }

        /* ===== نافذة تفاصيل الشخصية ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background-color: var(--white);
            border-radius: var(--border-radius-lg);
            position: relative;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .wide-modal {
            max-width: 1000px;
        }

        .close {
            position: absolute;
            top: 20px;
            left: 20px;
            color: var(--primary-dark);
            font-size: 2rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
            z-index: 2001;
        }

        .close:hover {
            background-color: var(--secondary-light);
            transform: rotate(90deg);
        }

        #characterModalContent {
            padding: 3rem;
        }

        /* ===== الفوتر ===== */
        footer {
            background-color: var(--primary-dark);
            color: var(--primary-light);
            padding-top: 4rem;
        }

        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px 3rem;
        }

        .footer-section h4 {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: var(--primary-light);
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 1.5rem;
        }

        .footer-logo img {
            height: 40px;
        }

        .footer-logo h3 {
            font-size: 1.5rem;
            color: var(--primary-light);
        }

        .footer-description {
            margin-bottom: 1.5rem;
            line-height: 1.7;
            opacity: 0.9;
            color: rgba(222, 201, 178, 0.9);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 0.8rem;
        }

        .footer-links a {
            color: rgba(222, 201, 178, 0.9);
            text-decoration: none;
            transition: all 0.3s;
        }

        .footer-links a:hover {
            color: var(--white);
            padding-right: 5px;
        }

        .footer-bottom {
            text-align: center;
            padding: 1.5rem 0;
            border-top: 1px solid rgba(222, 201, 178, 0.2);
            font-size: 0.9rem;
            opacity: 0.8;
            color: rgba(222, 201, 178, 0.8);
        }

        .footer-bottom p {
            margin-bottom: 0.5rem;
        }

        /* ===== التصميم المتجاوب ===== */
        @media (max-width: 1024px) {
            .exhibit-title {
                font-size: 2.8rem;
            }
            
            .characters-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .nav-menu {
                display: none;
                position: absolute;
                top: 100%;
                right: 0;
                width: 100%;
                background-color: var(--primary-dark);
                flex-direction: column;
                padding: 1rem;
                box-shadow: var(--shadow-medium);
            }
            
            .nav-menu.active {
                display: flex;
            }
            
            .menu-toggle {
                display: block;
            }
            
            .exhibit-title {
                font-size: 2.2rem;
            }
            
            .exhibit-subtitle {
                font-size: 1.1rem;
            }
            
            .quiz-card {
                padding: 2rem;
            }
            
            .timeline-navigation {
                flex-direction: column;
                align-items: center;
            }
        }

        @media (max-width: 480px) {
            .exhibit-title {
                font-size: 1.8rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .exhibit-meta {
                flex-direction: column;
                align-items: center;
                gap: 1rem;
            }
            
            .quiz-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- شريط التنقل -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <img src="https://www.foundingday.sa/-/media/FoundingDay/images/Header/Header-logo.svg" alt="شعار يوم التأسيس" class="logo-img">
                <span class="logo-text">رحلة التأسيس</span>
            </div>
            
            <div class="nav-menu">
                <a href="../index.html" class="nav-link"><i class="fas fa-home"></i> الرئيسية</a>
                <a href="memory.html" class="nav-link active"><i class="fas fa-landmark"></i> ذاكرة الملحمة</a>
                <a href="heritage.html" class="nav-link"><i class="fas fa-archway"></i> إرث الأجداد</a>
                <a href="sound.html" class="nav-link"><i class="fas fa-music"></i> صوت الوطن</a>
                <a href="vision.html" class="nav-link"><i class="fas fa-chart-line"></i> الرؤية المتجددة</a>
            </div>
            
            <button class="menu-toggle" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- رأس الصفحة -->
    <header class="exhibit-header">
        <div class="header-content">
            <h1 class="exhibit-title">ذاكرة الملحمة</h1>
            <p class="exhibit-subtitle">خط زمني تفاعلي يروي قصة تأسيس المملكة العربية السعودية</p>
            <div class="exhibit-meta">
                <span><i class="far fa-clock"></i> الوقت المقدر: ٣٠ دقيقة</span>
                <span><i class="fas fa-star"></i> ١٥٠ نقطة يمكن ربحها</span>
                <span><i class="fas fa-users"></i> ٥٠٠+ طالبة استكشفته</span>
            </div>
        </div>
    </header>

    <!-- الخط الزمني التفاعلي -->
    <section class="timeline-section">
        <div class="container">
            <h2 class="section-title">الخط الزمني للتأسيس</h2>
            <p class="section-subtitle">انتقلي بين الحقب التاريخية وشاهدي الأحداث الرئيسية</p>
            
            <div class="timeline-container">
                <div class="timeline-navigation">
                    <button class="timeline-nav-btn" data-year="1446">١٤٤٦هـ</button>
                    <button class="timeline-nav-btn" data-year="1727">١١٣٩هـ / ١٧٢٧م</button>
                    <button class="timeline-nav-btn" data-year="1818">١٢٣٣هـ / ١٨١٨م</button>
                    <button class="timeline-nav-btn" data-year="1902">١٣١٩هـ / ١٩٠٢م</button>
                    <button class="timeline-nav-btn" data-year="1932">١٣٥١هـ / ١٩٣٢م</button>
                </div>
                
                <div class="timeline-content">
                    <div class="timeline-event" id="year-1446">
                        <div class="event-content">
                            <h3>جذور التأسيس: مانع المريدي</h3>
                            <div class="event-date">٨٥٠هـ / ١٤٤٦م</div>
                            <div class="event-media">
                                <img src="https://images.unsplash.com/photo-1586771107445-d3ca888129fe?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="مانع المريدي">
                                <div class="media-caption">مانع بن ربيعة المريدي - الجد المؤسس</div>
                            </div>
                            <div class="event-description">
                                <p>في منتصف القرن التاسع الهجري، قدم مانع بن ربيعة المريدي من بلدة "الدروع" في وادي حنيفة إلى منطقة "المليبيد" و"غصيبة"، واستقر فيهما بعد أن منحه ابن عمه ابن درع أرضاً في المنطقة. هذا الحدث يمثل البذرة الأولى لتأسيس الدولة السعودية.</p>
                                
                                <div class="event-highlights">
                                    <h4>أبرز نقاط هذه الحقبة:</h4>
                                    <ul>
                                        <li>الاستقرار في وادي حنيفة وتأسيس مجتمع زراعي</li>
                                        <li>تأسيس بلدتي "المليبيد" و"غصيبة" كمراكز سكنية</li>
                                        <li>بداية النمو السكاني والزراعي في المنطقة</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="interactive-quiz">
                                <h4>اختبر معلوماتك</h4>
                                <div class="quiz-question">
                                    <p>من الذي منح مانع المريدي الأرض في وادي حنيفة؟</p>
                                    <div class="quiz-options">
                                        <button class="quiz-option" data-correct="false">الإمام محمد بن سعود</button>
                                        <button class="quiz-option" data-correct="true">ابن درع</button>
                                        <button class="quiz-option" data-correct="false">الشيخ محمد بن عبدالوهاب</button>
                                        <button class="quiz-option" data-correct="false">السلطان سليم الأول</button>
                                    </div>
                                    <div class="quiz-feedback"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- بقية السنوات سيتم إضافتها ديناميكياً -->
                </div>
                
                <div class="timeline-progress">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <div class="progress-steps">
                        <div class="step active" data-step="1">الجذور</div>
                        <div class="step" data-step="2">الدولة الأولى</div>
                        <div class="step" data-step="3">التحديات</div>
                        <div class="step" data-step="4">الدولة الثانية</div>
                        <div class="step" data-step="5">الدولة الثالثة</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- الخرائط التفاعلية -->
    <section class="maps-section">
        <div class="container">
            <h2 class="section-title">رحلة التأسيس على الخريطة</h2>
            
            <div class="map-container">
                <div class="map-viewer">
                    <div class="map-overlay">
                        <div class="map-point" style="top: 40%; left: 45%;" data-location="الدرعية">
                            <div class="point-marker"></div>
                            <div class="point-info">
                                <h4>الدرعية</h4>
                                <p>عاصمة الدولة السعودية الأولى</p>
                                <button class="btn-small" onclick="showLocationDetail('الدرعية')">استكشف</button>
                            </div>
                        </div>
                        
                        <div class="map-point" style="top: 50%; left: 55%;" data-location="الرياض">
                            <div class="point-marker"></div>
                            <div class="point-info">
                                <h4>الرياض</h4>
                                <p>عاصمة الدولة السعودية الثالثة</p>
                                <button class="btn-small" onclick="showLocationDetail('الرياض')">استكشف</button>
                            </div>
                        </div>
                        
                        <div class="map-point" style="top: 35%; left: 40%;" data-location="نجد">
                            <div class="point-marker"></div>
                            <div class="point-info">
                                <h4>نجد</h4>
                                <p>منطقة انطلاق التأسيس</p>
                                <button class="btn-small" onclick="showLocationDetail('نجد')">استكشف</button>
                            </div>
                        </div>
                        
                        <div class="map-point" style="top: 60%; left: 50%;" data-location="الحجاز">
                            <div class="point-marker"></div>
                            <div class="point-info">
                                <h4>الحجاز</h4>
                                <p>مركز روحي وتاريخي</p>
                                <button class="btn-small" onclick="showLocationDetail('الحجاز')">استكشف</button>
                            </div>
                        </div>
                    </div>
                    
                    <img src="https://images.unsplash.com/photo-1528181304800-259b08848526?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80" alt="خريطة المملكة" class="map-image">
                </div>
                
                <div class="map-details" id="locationDetails">
                    <h3>اختر موقعاً على الخريطة</h3>
                    <p>انقري على أحد المواقع على الخريطة لاستكشاف دوره في قصة التأسيس.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- الشخصيات المؤثرة -->
    <section class="characters-section">
        <div class="container">
            <h2 class="section-title">شخصيات صنعت التاريخ</h2>
            
            <div class="characters-grid">
                <div class="character-card">
                    <div class="character-image">
                        <img src="https://images.unsplash.com/photo-1518834103328-4dbb0d8400de?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="الإمام محمد بن سعود">
                        <div class="character-badge">المؤسس</div>
                    </div>
                    <div class="character-info">
                        <h3>الإمام محمد بن سعود</h3>
                        <p class="character-dates">(١١٣٩ - ١١٧٩هـ / ١٧٢٧ - ١٧٦٥م)</p>
                        <p class="character-bio">مؤسس الدولة السعودية الأولى، حكم من ١٧٢٧م حتى ١٧٦٥م. اتسمت فترة حكمه بالحكمة والتخطيط الاستراتيجي، حيث أسس نظاماً إدارياً قوياً واهتم بالعلم والعلماء.</p>
                        
                        <div class="character-achievements">
                            <h4>أبرز الإنجازات:</h4>
                            <ul>
                                <li>تأسيس الدولة السعودية الأولى عام ١١٣٩هـ</li>
                                <li>تحقيق الوحدة والاستقرار في نجد</li>
                                <li>إرساء قواعد العدل والحكم الرشيد</li>
                            </ul>
                        </div>
                        
                        <button class="btn-primary" onclick="showCharacterModal(1)">المزيد</button>
                    </div>
                </div>
                
                <div class="character-card">
                    <div class="character-image">
                        <img src="https://images.unsplash.com/photo-1518834103328-4dbb0d8400de?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=60" alt="الملك عبدالعزيز">
                        <div class="character-badge">المؤسس</div>
                    </div>
                    <div class="character-info">
                        <h3>الملك عبدالعزيز آل سعود</h3>
                        <p class="character-dates">(١٢٩٣ - ١٣٧٣هـ / ١٨٧٦ - ١٩٥٣م)</p>
                        <p class="character-bio">مؤسس الدولة السعودية الثالثة، استعاد الرياض عام ١٩٠٢م ووحد معظم أجزاء شبه الجزيرة العربية تحت اسم المملكة العربية السعودية عام ١٩٣٢م.</p>
                        
                        <div class="character-achievements">
                            <h4>أبرز الإنجازات:</h4>
                            <ul>
                                <li>استعادة الرياض عام ١٣١٩هـ / ١٩٠٢م</li>
                                <li>توحيد المملكة العربية السعودية عام ١٣٥١هـ / ١٩٣٢م</li>
                                <li>بدء التنمية الحديثة للمملكة</li>
                            </ul>
                        </div>
                        
                        <button class="btn-primary" onclick="showCharacterModal(2)">المزيد</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- اختبار نهاية الرحلة -->
    <section class="quiz-section">
        <div class="container">
            <div class="quiz-card">
                <h2 class="section-title">اختبر معرفتك التاريخية</h2>
                <p class="section-subtitle">أكملي هذا الاختبار لتربحي ٥٠ نقطة إضافية</p>
                
                <div id="memoryQuiz">
                    <!-- سيتم تحميل الأسئلة ديناميكياً -->
                </div>
                
                <div class="quiz-results" id="quizResults" style="display: none;">
                    <h3>نتيجتك</h3>
                    <div class="score-display">
                        <div class="score-circle">
                            <span id="finalScore">٠</span>
                            <small>من ١٠٠</small>
                        </div>
                    </div>
                    <p id="resultMessage"></p>
                    <button class="btn-primary" onclick="retakeQuiz()">أعد الاختبار</button>
                    <button class="btn-secondary" onclick="shareResults()">شارك النتيجة</button>
                </div>
            </div>
        </div>
    </section>

    <!-- الفوتر -->
    <footer>
        <div class="footer-container">
            <div class="footer-section">
                <div class="footer-logo">
                    <img src="https://www.foundingday.sa/-/media/FoundingDay/images/Header/Header-logo.svg" alt="شعار يوم التأسيس">
                    <h3>رحلة التأسيس</h3>
                </div>
                <p class="footer-description">
                    مشروع تعليمي تفاعلي بمناسبة يوم التأسيس السعودي ٢٠٢٦، تم تطويره بواسطة المدربة شروق الحربي.
                </p>
            </div>
            
            <div class="footer-section">
                <h4>روابط سريعة</h4>
                <ul class="footer-links">
                    <li><a href="../index.html">الرئيسية</a></li>
                    <li><a href="memory.html">ذاكرة الملحمة</a></li>
                    <li><a href="heritage.html">إرث الأجداد</a></li>
                    <li><a href="sound.html">صوت الوطن</a></li>
                    <li><a href="vision.html">الرؤية المتجددة</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h4>مشاريع أخرى</h4>
                <ul class="footer-links">
                    <li><a href="../competition/index.html">مسابقة باحثات التأسيس</a></li>
                    <li><a href="../games/puzzle.html">ألعاب تفاعلية</a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>© ٢٠٢٦ رحلة التأسيس - يوم التأسيس السعودي. جميع الحقوق محفوظة.</p>
            <p>هذا المشروع تعليمي ويتبع الهوية الرسمية ليوم التأسيس من الموقع الرسمي.</p>
        </div>
    </footer>

    <!-- نافذة تفاصيل الشخصية -->
    <div id="characterModal" class="modal">
        <div class="modal-content wide-modal">
            <span class="close" onclick="closeCharacterModal()">&times;</span>
            <div id="characterModalContent">
                <!-- سيتم تعبئته ديناميكياً -->
            </div>
        </div>
    </div>

    <script>
        // ===== الكود الرئيسي للصفحة =====
        
        document.addEventListener('DOMContentLoaded', function() {
            initPage();
        });
        
        function initPage() {
            initTimeline();
            initMap();
            initQuiz();
            initNavigation();
        }
        
        // ===== 1. إدارة شريط التنقل =====
        function initNavigation() {
            window.toggleMenu = function() {
                const navMenu = document.querySelector('.nav-menu');
                navMenu.classList.toggle('active');
            };
            
            // إغلاق القائمة عند النقر على رابط
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', () => {
                    document.querySelector('.nav-menu').classList.remove('active');
                });
            });
            
            // إضافة تأثير التمرير
            window.addEventListener('scroll', () => {
                const navbar = document.querySelector('.navbar');
                if (window.scrollY > 100) {
                    navbar.style.backgroundColor = 'rgba(107, 78, 69, 0.95)';
                    navbar.style.backdropFilter = 'blur(10px)';
                } else {
                    navbar.style.backgroundColor = 'var(--primary-dark)';
                    navbar.style.backdropFilter = 'none';
                }
            });
        }
        
        // ===== 2. إدارة الخط الزمني =====
        function initTimeline() {
            const timelineData = {
                '1446': {
                    title: 'جذور التأسيس: مانع المريدي',
                    date: '٨٥٠هـ / ١٤٤٦م',
                    image: 'https://images.unsplash.com/photo-1586771107445-d3ca888129fe?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                    description: 'في منتصف القرن التاسع الهجري، قدم مانع بن ربيعة المريدي من بلدة "الدروع" في وادي حنيفة إلى منطقة "المليبيد" و"غصيبة"، واستقر فيهما بعد أن منحه ابن عمه ابن درع أرضاً في المنطقة. هذا الحدث يمثل البذرة الأولى لتأسيس الدولة السعودية.',
                    highlights: [
                        'الاستقرار في وادي حنيفة وتأسيس مجتمع زراعي',
                        'تأسيس بلدتي "المليبيد" و"غصيبة" كمراكز سكنية',
                        'بداية النمو السكاني والزراعي في المنطقة'
                    ],
                    quiz: {
                        question: 'من الذي منح مانع المريدي الأرض في وادي حنيفة؟',
                        options: [
                            { text: 'الإمام محمد بن سعود', correct: false },
                            { text: 'ابن درع', correct: true },
                            { text: 'الشيخ محمد بن عبدالوهاب', correct: false },
                            { text: 'السلطان سليم الأول', correct: false }
                        ]
                    }
                },
                '1727': {
                    title: 'تأسيس الدولة السعودية الأولى',
                    date: '١١٣٩هـ / ١٧٢٧م',
                    image: 'https://images.unsplash.com/photo-1518834103328-4dbb0d8400de?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                    description: 'تأسست الدولة السعودية الأولى عندما تولى الإمام محمد بن سعود الحكم في الدرعية. شكل هذا الحدث بداية حقبة جديدة من الوحدة والاستقرار في نجد.',
                    highlights: [
                        'تأسيس الدولة السعودية الأولى',
                        'تحقيق الوحدة في منطقة نجد',
                        'بداية النظام الإداري الحديث'
                    ],
                    quiz: {
                        question: 'من هو مؤسس الدولة السعودية الأولى؟',
                        options: [
                            { text: 'الملك عبدالعزيز', correct: false },
                            { text: 'الإمام محمد بن سعود', correct: true },
                            { text: 'الإمام تركي بن عبدالله', correct: false },
                            { text: 'الملك سعود', correct: false }
                        ]
                    }
                }
            };
            
            const navBtns = document.querySelectorAll('.timeline-nav-btn');
            const timelineContent = document.querySelector('.timeline-content');
            
            navBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const year = this.getAttribute('data-year');
                    showTimelineEvent(year, timelineData[year]);
                    updateProgress(year);
                });
            });
            
            // عرض أول حدث افتراضي
            if (navBtns.length > 0) {
                navBtns[0].click();
            }
        }
        
        function showTimelineEvent(year, data) {
            const eventHTML = `
                <div class="timeline-event" id="year-${year}">
                    <div class="event-content">
                        <h3>${data.title}</h3>
                        <div class="event-date">${data.date}</div>
                        <div class="event-media">
                            <img src="${data.image}" alt="${data.title}">
                            <div class="media-caption">${data.title}</div>
                        </div>
                        <div class="event-description">
                            <p>${data.description}</p>
                            
                            <div class="event-highlights">
                                <h4>أبرز نقاط هذه الحقبة:</h4>
                                <ul>
                                    ${data.highlights.map(item => `<li>${item}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                        
                        <div class="interactive-quiz">
                            <h4>اختبر معلوماتك</h4>
                            <div class="quiz-question">
                                <p>${data.quiz.question}</p>
                                <div class="quiz-options">
                                    ${data.quiz.options.map((option, index) => `
                                        <button class="quiz-option" data-correct="${option.correct}">
                                            ${option.text}
                                        </button>
                                    `).join('')}
                                </div>
                                <div class="quiz-feedback"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            const timelineContent = document.querySelector('.timeline-content');
            timelineContent.innerHTML = eventHTML;
            
            // إضافة أحداث للاختبار التفاعلي
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', function() {
                    const isCorrect = this.getAttribute('data-correct') === 'true';
                    const feedback = this.closest('.quiz-question').querySelector('.quiz-feedback');
                    
                    // إزالة التنسيق من جميع الأزرار
                    document.querySelectorAll('.quiz-option').forEach(btn => {
                        btn.classList.remove('correct', 'incorrect');
                    });
                    
                    // تنسيق الزر المختار
                    this.classList.add(isCorrect ? 'correct' : 'incorrect');
                    
                    // عرض التغذية الراجعة
                    feedback.textContent = isCorrect ? 
                        'إجابة صحيحة! أحسنتِ 👍' : 
                        'إجابة غير صحيحة. حاولي مرة أخرى';
                    feedback.className = `quiz-feedback ${isCorrect ? 'correct' : 'incorrect'}`;
                    
                    // إضافة نقاط إذا كانت الإجابة صحيحة
                    if (isCorrect) {
                        // يمكن إضافة نظام النقاط هنا
                    }
                });
            });
            
            // تحديث أزرار التنقل النشطة
            document.querySelectorAll('.timeline-nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.timeline-nav-btn[data-year="${year}"]`).classList.add('active');
        }
        
        function updateProgress(year) {
            const yearMap = {
                '1446': 1,
                '1727': 2,
                '1818': 3,
                '1902': 4,
                '1932': 5
            };
            
            const currentStep = yearMap[year] || 1;
            const progressFill = document.querySelector('.progress-fill');
            const steps = document.querySelectorAll('.step');
            
            // تحديث شريط التقدم
            const percentage = ((currentStep - 1) / (steps.length - 1)) * 100;
            progressFill.style.width = `${percentage}%`;
            
            // تحديث الخطوات
            steps.forEach((step, index) => {
                if (index < currentStep) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
            });
        }
        
        // ===== 3. إدارة الخرائط التفاعلية =====
        function initMap() {
            const points = document.querySelectorAll('.map-point');
            
            points.forEach(point => {
                point.addEventListener('click', function() {
                    const location = this.getAttribute('data-location');
                    showLocationDetail(location);
                });
            });
        }
        
        function showLocationDetail(location) {
            const details = {
                'الدرعية': {
                    title: 'الدرعية التاريخية',
                    content: `
                        <h3>الدرعية: عاصمة التأسيس</h3>
                        <p>تعد الدرعية رمزاً للوحدة الوطنية وبداية تأسيس الدولة السعودية. كانت عاصمة الدولة السعودية الأولى منذ عام ١٧٢٧م وحتى ١٨١٨م.</p>
                        
                        <div class="location-facts">
                            <h4>حقائق سريعة:</h4>
                            <ul>
                                <li>أسسها مانع المريدي عام ١٤٤٦م</li>
                                <li>اتخذها الإمام محمد بن سعود عاصمة لدولته عام ١٧٢٧م</li>
                                <li>شهدت ازدهاراً علمياً وثقافياً كبيراً</li>
                                <li>أدرجت في قائمة اليونسكو للتراث العالمي عام ٢٠١٠</li>
                            </ul>
                        </div>
                        
                        <div class="location-images">
                            <img src="https://images.unsplash.com/photo-1586771107445-d3ca888129fe?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="الدرعية">
                            <img src="https://images.unsplash.com/photo-1518834103328-4dbb0d8400de?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="حي الطريف">
                        </div>
                    `
                },
                'الرياض': {
                    title: 'الرياض: قلب المملكة',
                    content: `
                        <h3>الرياض: من قلعة صغيرة إلى عاصمة عالمية</h3>
                        <p>تطورت الرياض من بلدة صغيرة محصنة إلى واحدة من أسرع العواصم نمواً في العالم، ومركزاً اقتصادياً وسياسياً للمملكة.</p>
                        
                        <div class="location-facts">
                            <h4>محطات التطور:</h4>
                            <ul>
                                <li>استعادها الملك عبدالعزيز عام ١٩٠٢م</li>
                                <li>أصبحت عاصمة الدولة السعودية الثالثة عام ١٩٣٢م</li>
                                <li>شهدت نهضة تنموية غير مسبوقة</li>
                                <li>تحتضن الآن أهم المشاريع التنموية في رؤية ٢٠٣٠</li>
                            </ul>
                        </div>
                    `
                },
                'نجد': {
                    title: 'نجد: مهد التأسيس',
                    content: `
                        <h3>نجد: الأرض التي انطلقت منها الدولة السعودية</h3>
                        <p>تعتبر نجد القلب الجغرافي والسياسي للدولة السعودية، حيث نشأت وترعرعت قيم الوحدة والاستقرار.</p>
                        
                        <div class="location-facts">
                            <h4>أهميتها:</h4>
                            <ul>
                                <li>المنطقة التي انطلقت منها الدولة السعودية الأولى</li>
                                <li>مركز القوة السياسية والعسكرية</li>
                                <li>موطن العائلة المالكة والقبائل المؤسسة</li>
                            </ul>
                        </div>
                    `
                },
                'الحجاز': {
                    title: 'الحجاز: المركز الروحي',
                    content: `
                        <h3>الحجاز: رمز الوحدة الإسلامية</h3>
                        <p>يحتضن الحجاز أقدس المقدسات الإسلامية، وقد كان ضمه إلى الدولة السعودية حدثاً تاريخياً مهماً.</p>
                        
                        <div class="location-facts">
                            <h4>أهم الأحداث:</h4>
                            <ul>
                                <li>ضم الحجاز إلى الدولة السعودية عام ١٩٢٥م</li>
                                <li>وجود الحرمين الشريفين في مكة المكرمة والمدينة المنورة</li>
                                <li>مركز التجارة والثقافة عبر التاريخ</li>
                            </ul>
                        </div>
                    `
                }
            };
            
            const detailDiv = document.getElementById('locationDetails');
            if (details[location]) {
                detailDiv.innerHTML = details[location].content;
            } else {
                detailDiv.innerHTML = `
                    <h3>${location}</h3>
                    <p>اختر موقعاً آخر على الخريطة لمعرفة المزيد عنه.</p>
                `;
            }
        }
        
        // ===== 4. إدارة الاختبارات =====
        function initQuiz() {
            const quizQuestions = [
                {
                    question: "في أي عام تأسست الدولة السعودية الأولى؟",
                    options: ["١٧٢٧م", "١٧٤٤م", "١٨١٨م", "١٩٠٢م"],
                    correct: 0,
                    points: 10
                },
                {
                    question: "من هو مؤسس الدولة السعودية الثالثة؟",
                    options: ["الملك فيصل", "الملك عبدالعزيز", "الملك سعود", "الملك فهد"],
                    correct: 1,
                    points: 10
                },
                {
                    question: "ما هي عاصمة الدولة السعودية الأولى؟",
                    options: ["الرياض", "الدرعية", "مكة المكرمة", "جدة"],
                    correct: 1,
                    points: 10
                },
                {
                    question: "في أي عام تم توحيد المملكة العربية السعودية؟",
                    options: ["١٩٠٢م", "١٩٢٦م", "١٩٣٢م", "١٩٣٨م"],
                    correct: 2,
                    points: 10
                }
            ];
            
            displayQuiz(quizQuestions);
        }
        
        function displayQuiz(questions) {
            const quizContainer = document.getElementById('memoryQuiz');
            let quizHTML = '';
            
            questions.forEach((q, index) => {
                quizHTML += `
                    <div class="quiz-question" id="q${index}">
                        <p>${index + 1}. ${q.question}</p>
                        <div class="quiz-options">
                            ${q.options.map((option, optIndex) => `
                                <button class="quiz-option" data-question="${index}" data-option="${optIndex}" data-correct="${optIndex === q.correct}">
                                    ${option}
                                </button>
                            `).join('')}
                        </div>
                        <div class="quiz-feedback" id="feedback${index}"></div>
                    </div>
                `;
            });
            
            quizHTML += `
                <div style="text-align: center; margin-top: 2rem;">
                    <button class="btn-primary" onclick="submitQuiz()">تقديم الإجابات</button>
                    <button class="btn-secondary" onclick="resetQuiz()">إعادة تعيين</button>
                </div>
            `;
            
            quizContainer.innerHTML = quizHTML;
            
            // إضافة أحداث لأزرار الاختبار
            document.querySelectorAll('#memoryQuiz .quiz-option').forEach(option => {
                option.addEventListener('click', function() {
                    const questionId = this.getAttribute('data-question');
                    const optionId = this.getAttribute('data-option');
                    
                    // إزالة التحديد من جميع خيارات هذا السؤال
                    document.querySelectorAll(`#q${questionId} .quiz-option`).forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // تحديد الخيار الحالي
                    this.classList.add('selected');
                });
            });
        }
        
        let userAnswers = {};
        
        function submitQuiz() {
            const questions = document.querySelectorAll('.quiz-question');
            let score = 0;
            let totalPoints = 0;
            
            questions.forEach((question, index) => {
                const selectedOption = question.querySelector('.quiz-option.selected');
                const feedback = document.getElementById(`feedback${index}`);
                
                if (selectedOption) {
                    const isCorrect = selectedOption.getAttribute('data-correct') === 'true';
                    const points = isCorrect ? 10 : 0;
                    
                    selectedOption.classList.add(isCorrect ? 'correct' : 'incorrect');
                    
                    feedback.textContent = isCorrect ? 
                        'إجابة صحيحة! +١٠ نقاط' : 
                        'إجابة غير صحيحة';
                    feedback.className = `quiz-feedback ${isCorrect ? 'correct' : 'incorrect'}`;
                    
                    if (isCorrect) score += points;
                    totalPoints += 10;
                    
                    userAnswers[index] = {
                        selected: selectedOption.textContent,
                        correct: isCorrect
                    };
                }
            });
            
            // عرض النتائج
            const quizContainer = document.getElementById('memoryQuiz');
            const resultsContainer = document.getElementById('quizResults');
            const finalScore = document.getElementById('finalScore');
            const resultMessage = document.getElementById('resultMessage');
            
            finalScore.textContent = score;
            
            let message = '';
            const percentage = (score / totalPoints) * 100;
            
            if (percentage >= 80) {
                message = 'ممتاز! معرفتك بتاريخ التأسيس رائعة. تستحقين لقب "باحثة التأسيس" 🏆';
            } else if (percentage >= 60) {
                message = 'جيد جداً! لديك معرفة جيدة بتاريخ التأسيس. استمري في التعلم 💪';
            } else if (percentage >= 40) {
                message = 'ليس سيئاً! لديك معرفة أساسية. ننصحك بزيارة المعارض التفاعلية لتعزيز معلوماتك 📚';
            } else {
                message = 'تحتاجين لمعرفة المزيد عن تاريخ التأسيس. ابدئي رحلتك من جديد! 🌟';
            }
            
            resultMessage.textContent = message;
            
            quizContainer.style.display = 'none';
            resultsContainer.style.display = 'block';
        }
        
        function resetQuiz() {
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            document.querySelectorAll('.quiz-feedback').forEach(feedback => {
                feedback.textContent = '';
                feedback.className = 'quiz-feedback';
            });
            
            userAnswers = {};
        }
        
        function retakeQuiz() {
            const quizContainer = document.getElementById('memoryQuiz');
            const resultsContainer = document.getElementById('quizResults');
            
            resetQuiz();
            quizContainer.style.display = 'block';
            resultsContainer.style.display = 'none';
        }
        
        function shareResults() {
            const score = document.getElementById('finalScore').textContent;
            const message = `حصلت على ${score} من 100 في اختبار ذاكرة الملحمة! 🏆\nجرب الاختبار الآن: ${window.location.href}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'نتيجة اختبار ذاكرة الملحمة',
                    text: message,
                    url: window.location.href
                });
            } else {
                // نسخ النتيجة إلى الحافظة
                navigator.clipboard.writeText(message).then(() => {
                    alert('تم نسخ النتيجة إلى الحافظة! يمكنك مشاركتها الآن 📋');
                });
            }
        }
        
        // ===== 5. نافذة تفاصيل الشخصية =====
        const characterData = {
            1: {
                name: 'الإمام محمد بن سعود',
                title: 'مؤسس الدولة السعودية الأولى',
                image: 'https://images.unsplash.com/photo-1518834103328-4dbb0d8400de?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                birth: '١١٣٩هـ / ١٧٢٧م',
                death: '١١٧٩هـ / ١٧٦٥م',
                reign: '١٧٢٧ - ١٧٦٥م',
                bio: `
                    <p>الإمام محمد بن سعود بن محمد بن مقرن آل سعود، مؤسس الدولة السعودية الأولى وأول حكامها. تولى الحكم في الدرعية عام ١١٣٩هـ (١٧٢٧م) بعد وفاة والده الأمير سعود بن محمد بن مقرن.</p>
                    
                    <p>تميزت فترة حكمه بالحكمة والعدل والتخطيط الاستراتيجي، حيث أسس نظاماً إدارياً قوياً واهتم بالعلم والعلماء، وجعل من الدرعية مركزاً علمياً وثقافياً مهماً في شبه الجزيرة العربية.</p>
                    
                    <div class="character-achievements">
                        <h4>أهم الإنجازات:</h4>
                        <ul>
                            <li>تأسيس الدولة السعودية الأولى عام ١١٣٩هـ / ١٧٢٧م</li>
                            <li>تحقيق الوحدة والاستقرار في منطقة نجد</li>
                            <li>إرساء قواعد العدل والحكم الرشيد</li>
                            <li>تأسيس نظام إداري متكامل</li>
                            <li>الاهتمام بالعلم والعلماء ودعم التعليم</li>
                            <li>تعزيز الأمن والاستقرار في المنطقة</li>
                        </ul>
                    </div>
                    
                    <div class="character-quote">
                        <blockquote>
                            "العدل أساس الملك، والعلم نور الحياة"
                            <cite>- الإمام محمد بن سعود</cite>
                        </blockquote>
                    </div>
                `
            },
            2: {
                name: 'الملك عبدالعزيز آل سعود',
                title: 'مؤسس المملكة العربية السعودية',
                image: 'https://images.unsplash.com/photo-1518834103328-4dbb0d8400de?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=60',
                birth: '١٢٩٣هـ / ١٨٧٦م',
                death: '١٣٧٣هـ / ١٩٥٣م',
                reign: '١٩٠٢ - ١٩٥٣م',
                bio: `
                    <p>الملك عبدالعزيز بن عبدالرحمن بن فيصل آل سعود، مؤسس المملكة العربية السعودية الحديثة. استعاد الرياض عام ١٣١٩هـ (١٩٠٢م) ووحد معظم أجزاء شبه الجزيرة العربية تحت اسم المملكة العربية السعودية عام ١٣٥١هـ (١٩٣٢م).</p>
                    
                    <p>يعتبر الملك عبدالعزيز واحداً من أعظم القادة في التاريخ العربي الحديث، حيث قاد عملية التوحيد من خلال سلسلة من الحملات العسكرية والدبلوماسية الناجحة، ووضع أسس الدولة الحديثة بمؤسساتها المختلفة.</p>
                    
                    <div class="character-achievements">
                        <h4>أهم الإنجازات:</h4>
                        <ul>
                            <li>استعادة الرياض عام ١٣١٩هـ / ١٩٠٢م</li>
                            <li>توحيد المملكة العربية السعودية عام ١٣٥١هـ / ١٩٣٢م</li>
                            <li>بدء التنمية الحديثة للمملكة</li>
                            <li>تأسيس النظام الإداري الحكومي</li>
                            <li>اكتشاف النفط وتوقيع اتفاقية الامتياز</li>
                            <li>إرساء العلاقات الدولية للمملكة</li>
                        </ul>
                    </div>
                    
                    <div class="character-quote">
                        <blockquote>
                            "إننا نعتبر أنفسنا أمة واحدة، شعب واحد، بلد واحد"
                            <cite>- الملك عبدالعزيز آل سعود</cite>
                        </blockquote>
                    </div>
                `
            }
        };
        
        function showCharacterModal(characterId) {
            const character = characterData[characterId];
            if (!character) return;
            
            const modalContent = document.getElementById('characterModalContent');
            modalContent.innerHTML = `
                <div style="display: grid; grid-template-columns: 300px 1fr; gap: 3rem; align-items: start;">
                    <div>
                        <img src="${character.image}" alt="${character.name}" style="width: 100%; border-radius: var(--border-radius); margin-bottom: 1rem;">
                        <div style="background-color: var(--secondary-light); padding: 1.5rem; border-radius: var(--border-radius);">
                            <h3 style="color: var(--primary-dark); margin-bottom: 0.5rem;">${character.name}</h3>
                            <p style="color: var(--primary-dark); font-weight: 600; margin-bottom: 1rem;">${character.title}</p>
                            
                            <div style="margin-bottom: 1rem;">
                                <p><strong>الميلاد:</strong> ${character.birth}</p>
                                <p><strong>الوفاة:</strong> ${character.death}</p>
                                <p><strong>فترة الحكم:</strong> ${character.reign}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        ${character.bio}
                    </div>
                </div>
            `;
            
            document.getElementById('characterModal').style.display = 'flex';
        }
        
        function closeCharacterModal() {
            document.getElementById('characterModal').style.display = 'none';
        }
        
        // إغلاق النافذة عند النقر خارجها
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('characterModal');
            if (event.target === modal) {
                closeCharacterModal();
            }
        });
    </script>
</body>
</html>
